<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Safety Inspector</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true">ğŸ›¡ï¸</div>
      <h1>Safety Inspector</h1>
      <button id="settings-toggle" class="settings-btn" title="Settings" aria-label="Open settings">âš™ï¸</button>
    </header>

    <!-- Main View -->
    <div id="main-view">
      <div id="loading" class="loading hidden" role="status" aria-label="Analyzing video">
        <div class="spinner" aria-hidden="true"></div>
        <p>Analyzing video...</p>
      </div>

      <div id="not-youtube" class="message hidden">
        <div class="icon">ğŸ“º</div>
        <p>Navigate to a YouTube video to analyze its safety.</p>
      </div>

      <div id="results" class="results hidden">
        <div class="score-section">
          <div class="score-circle" id="score-circle" role="meter" aria-label="Safety score" aria-valuemin="0" aria-valuemax="100">
            <span id="score-value">--</span>
          </div>
          <div class="score-label" id="score-label">Safety Score</div>
        </div>

        <div class="warnings-section" id="warnings-section">
          <h3>âš ï¸ Warnings Found</h3>
          <ul id="warnings-list"></ul>
        </div>

        <div class="categories-section" id="categories-section">
          <h3>ğŸ“‹ Categories Analyzed</h3>
          <div id="categories-list" class="categories-grid"></div>
        </div>

        <div class="details-section">
          <button id="view-details" class="btn-secondary" aria-label="View full safety report">View Full Report</button>
        </div>
      </div>

      <div id="error" class="error hidden" role="alert">
        <div class="icon" aria-hidden="true">âŒ</div>
        <p id="error-message">An error occurred</p>
        <button id="retry-btn" class="btn-primary">Retry</button>
      </div>
    </div>

    <!-- Settings View -->
    <div id="settings-view" class="hidden">
      <div class="settings-header">
        <button id="settings-back" class="back-btn" aria-label="Back to main view">â† Back</button>
        <h2>Settings</h2>
      </div>
      
      <!-- Core Detection Settings -->
      <div class="settings-section">
        <h3>ğŸ” Detection</h3>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ¤– AI Content Detection</span>
            <span class="toggle-desc">Flag AI-generated or fake videos</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-ai-detection" checked aria-label="AI Content Detection">
            <span class="slider"></span>
          </label>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">âš¡ Auto-Analyze</span>
            <span class="toggle-desc">Automatically check videos when page loads</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="auto-analyze" checked aria-label="Auto-Analyze">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <!-- Video Type Settings -->
      <div class="settings-section">
        <h3>ğŸ“º Video Types</h3>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ¬ Regular Videos</span>
            <span class="toggle-desc">Analyze standard YouTube videos</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-regular-videos" checked aria-label="Regular Videos">
            <span class="slider"></span>
          </label>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ“± YouTube Shorts</span>
            <span class="toggle-desc">Analyze Shorts videos</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-shorts" checked aria-label="YouTube Shorts">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <!-- Suggestions Settings -->
      <div class="settings-section">
        <h3>ğŸ’¡ Suggestions</h3>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">âœ… Real Video Alternatives</span>
            <span class="toggle-desc">Suggest real videos from trusted channels</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-alternatives" checked aria-label="Real Video Alternatives">
            <span class="slider"></span>
          </label>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ“ AI Tutorials</span>
            <span class="toggle-desc">Show "Learn to make AI videos" section</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-ai-tutorials" checked aria-label="AI Tutorials">
            <span class="slider"></span>
          </label>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ¨ AI Entertainment</span>
            <span class="toggle-desc">Show quality AI content suggestions</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-ai-entertainment" checked aria-label="AI Entertainment">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <!-- Banner Behavior -->
      <div class="settings-section">
        <h3>ğŸ¯ Banner Behavior</h3>
        <div class="select-row">
          <div class="select-info">
            <span class="select-label">Banner Style</span>
            <span class="select-desc">How alerts appear on screen</span>
          </div>
          <select id="banner-style" class="setting-select" aria-label="Banner Style">
            <option value="modal">Modal (Center)</option>
            <option value="corner">Corner Badge</option>
            <option value="bar">Top Bar</option>
          </select>
        </div>
        <div class="select-row">
          <div class="select-info">
            <span class="select-label">Auto-Dismiss</span>
            <span class="select-desc">Automatically hide banner after</span>
          </div>
          <select id="auto-dismiss" class="setting-select" aria-label="Auto-Dismiss">
            <option value="0">Never (Manual)</option>
            <option value="10">10 seconds</option>
            <option value="30">30 seconds</option>
            <option value="60">1 minute</option>
          </select>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ”” Periodic Reminders</span>
            <span class="toggle-desc">Flash AI indicator every 60s during playback</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-reminders" checked aria-label="Periodic Reminders">
            <span class="slider"></span>
          </label>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ¬ End-of-Video Alert</span>
            <span class="toggle-desc">Show reminder when video ends</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-end-alert" checked aria-label="End-of-Video Alert">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <!-- Sound & Visual -->
      <div class="settings-section">
        <h3>ğŸ”Š Alerts</h3>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ”Š Sound Alerts</span>
            <span class="toggle-desc">Play sound when AI/danger detected</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-sound" aria-label="Sound Alerts">
            <span class="slider"></span>
          </label>
        </div>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">âœ¨ Visual Effects</span>
            <span class="toggle-desc">Animated borders and highlights</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-visual-effects" checked aria-label="Visual Effects">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <!-- Detection Sensitivity -->
      <div class="settings-section">
        <h3>ğŸšï¸ Sensitivity</h3>
        <div class="select-row">
          <div class="select-info">
            <span class="select-label">AI Detection Level</span>
            <span class="select-desc">How strict AI detection should be</span>
          </div>
          <select id="ai-sensitivity" class="setting-select" aria-label="AI Detection Level">
            <option value="low">Low (Obvious AI only)</option>
            <option value="medium" selected>Medium (Balanced)</option>
            <option value="high">High (Sensitive)</option>
          </select>
        </div>
        <div class="select-row">
          <div class="select-info">
            <span class="select-label">Safety Warning Level</span>
            <span class="select-desc">Minimum severity to show warnings</span>
          </div>
          <select id="safety-sensitivity" class="setting-select" aria-label="Safety Warning Level">
            <option value="all">All Warnings</option>
            <option value="medium" selected>Medium & High</option>
            <option value="high">High Only</option>
          </select>
        </div>
      </div>

      <!-- Trusted Channels -->
      <div class="settings-section">
        <h3>âœ“ Trusted Channels</h3>
        <p class="settings-info">Videos from these channels won't trigger AI warnings</p>
        <div class="trusted-list" id="trusted-channels-list">
          <!-- Dynamically populated by JavaScript -->
        </div>
        <div class="add-trusted">
          <input type="text" id="new-trusted-channel" placeholder="Add channel name..." aria-label="Add trusted channel">
          <button id="add-trusted-btn" class="btn-small" aria-label="Add channel">+ Add</button>
        </div>
      </div>

      <!-- Keyboard Shortcuts -->
      <div class="settings-section">
        <h3>âŒ¨ï¸ Keyboard Shortcuts</h3>
        <div class="shortcut-row">
          <span class="shortcut-label">Dismiss Banner</span>
          <kbd>Esc</kbd>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Toggle AI Info</span>
          <kbd>I</kbd>
        </div>
        <div class="shortcut-row">
          <span class="shortcut-label">Quick Analyze</span>
          <kbd>Shift + A</kbd>
        </div>
      </div>

      <!-- Advanced / API Settings -->
      <div class="settings-section">
        <h3>ğŸ”§ Advanced</h3>
        <p class="settings-info">Backend connection settings</p>
        <div class="input-row" style="margin-bottom: 8px;">
          <label for="api-secret-key" class="input-label">API Key</label>
          <input type="password" id="api-secret-key" placeholder="Leave empty if not required" autocomplete="off" style="width:100%;padding:6px 8px;border:1px solid var(--border);border-radius:4px;font-size:12px;background:var(--bg-secondary);color:var(--text);">
        </div>
        <button id="save-api-key" class="btn-small" style="margin-top:4px;">Save API Key</button>
      </div>

      <!-- Data & Privacy -->
      <div class="settings-section">
        <h3>ğŸ”’ Privacy</h3>
        <div class="toggle-row">
          <div class="toggle-info">
            <span class="toggle-label">ğŸ’¾ Cache Results</span>
            <span class="toggle-desc">Remember analysis for faster loading</span>
          </div>
          <label class="switch">
            <input type="checkbox" id="enable-cache" checked aria-label="Cache Results">
            <span class="slider"></span>
          </label>
        </div>
      </div>

      <div class="settings-footer">
        <button id="export-settings" class="btn-secondary">Export Settings</button>
        <button id="import-settings" class="btn-secondary">Import Settings</button>
        <button id="reset-settings" class="btn-danger">Reset to Defaults</button>
      </div>
    </div>

    <footer>
      <div class="api-status">
        <span class="status-dot" id="api-status-dot"></span>
        <span id="api-status-text">Checking API...</span>
      </div>
      <div class="version">v3.0.1</div>
    </footer>
  </div>

  <script src="../lib/browser-polyfill.min.js"></script>
  <script src="popup.js"></script>
</body>
</html>
